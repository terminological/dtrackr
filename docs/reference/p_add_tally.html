<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>dplyr modifying operations — p_add_tally • dtrackr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dplyr modifying operations — p_add_tally"><meta name="description" content="See dplyr::mutate(), dplyr::add_count(), dplyr::add_tally(),
dplyr::transmute(), dplyr::select(), dplyr::relocate(),
dplyr::rename() dplyr::rename_with(), dplyr::arrange() for more details
on underlying functions. dtrackr provides equivalent functions for
mutating, selecting and renaming a data set which act in the same way as
dplyr. mutate / select / rename generally don't add anything in terms
of provenance of data so the default behaviour is to miss these out of the
dtrackr history. This can be overridden with the .messages, or
.headline values in which case they behave just like a comment()."><meta property="og:description" content="See dplyr::mutate(), dplyr::add_count(), dplyr::add_tally(),
dplyr::transmute(), dplyr::select(), dplyr::relocate(),
dplyr::rename() dplyr::rename_with(), dplyr::arrange() for more details
on underlying functions. dtrackr provides equivalent functions for
mutating, selecting and renaming a data set which act in the same way as
dplyr. mutate / select / rename generally don't add anything in terms
of provenance of data so the default behaviour is to miss these out of the
dtrackr history. This can be overridden with the .messages, or
.headline values in which case they behave just like a comment()."><meta property="og:image" content="https://terminological.github.io/dtrackr/index.html/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dtrackr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/dtrackr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/consort-example.html">dtrackr - Consort statement example</a></li>
    <li><a class="dropdown-item" href="../articles/dtrackr-options.html">dtrackr - Configuration example</a></li>
    <li><a class="dropdown-item" href="../articles/grouping-and-nesting.html">dtrackr - Grouping, Nesting and Long format data</a></li>
    <li><a class="dropdown-item" href="../articles/joining-pipelines.html">dtrackr - Joining data pipelines</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/terminological/dtrackr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>dplyr modifying operations</h1>
      <small class="dont-index">Source: <a href="https://github.com/terminological/dtrackr/blob/HEAD/R/dtrackr.R" class="external-link"><code>R/dtrackr.R</code></a></small>
      <div class="d-none name"><code>p_add_tally.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>See <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_count()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_tally()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">dplyr::transmute()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">dplyr::relocate()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename()</a></code> <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename_with()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code> for more details
on underlying functions. <code>dtrackr</code> provides equivalent functions for
mutating, selecting and renaming a data set which act in the same way as
<code>dplyr</code>. <code>mutate</code> / <code>select</code> / <code>rename</code> generally don't add anything in terms
of provenance of data so the default behaviour is to miss these out of the
<code>dtrackr</code> history. This can be overridden with the <code>.messages</code>, or
<code>.headline</code> values in which case they behave just like a <code><a href="comment.html">comment()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">p_add_tally</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, .messages <span class="op">=</span> <span class="st">""</span>, .headline <span class="op">=</span> <span class="st">""</span>, .tag <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A data frame, data frame extension (e.g. a tibble), or a
lazy data frame (e.g. from dbplyr or dtplyr).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>&lt;<code><a href="https://rlang.r-lib.org/reference/args_data_masking.html" class="external-link">data-masking</a></code>&gt; Variables to group
by.</p></dd>


<dt id="arg--messages">.messages<a class="anchor" aria-label="anchor" href="#arg--messages"></a></dt>
<dd><p>a set of glue specs. The glue code can use any global
variable, grouping variable, {.new_cols} or {.dropped_cols} for changes to
columns, {.cols} for the output column names, or {.strata}. Defaults to nothing.</p></dd>


<dt id="arg--headline">.headline<a class="anchor" aria-label="anchor" href="#arg--headline"></a></dt>
<dd><p>a headline glue spec. The glue code can use any global
variable, grouping variable, {.new_cols}, {.dropped_cols}, {.cols} or {.strata}.
Defaults to nothing.</p></dd>


<dt id="arg--tag">.tag<a class="anchor" aria-label="anchor" href="#arg--tag"></a></dt>
<dd><p>if you want the summary data from this step in the future then
give it a name with .tag.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>the <code>.data</code> dataframe after being modified by the <code>dplyr</code> equivalent
function, but with the history graph updated with a new stage if the
<code>.messages</code> or <code>.headline</code> parameter is not empty.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_tally()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://terminological.github.io/dtrackr/index.html">dtrackr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mutate and other functions are unitary operations that generally change</span></span></span>
<span class="r-in"><span><span class="co"># the structure but not size of a dataframe. In dtrackr these are by ignored</span></span></span>
<span class="r-in"><span><span class="co"># by default but we can change that so that their behaviour is obvious.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add_count</span></span></span>
<span class="r-in"><span><span class="co"># adding in a count or tally column as a new column</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">add_count</a></span><span class="op">(</span><span class="va">Species</span>, name<span class="op">=</span><span class="st">"new_count_total"</span>,</span></span>
<span class="r-in"><span>            .messages<span class="op">=</span><span class="st">"{.new_cols}"</span>,</span></span>
<span class="r-in"><span>            <span class="co"># .messages="{.cols}",</span></span></span>
<span class="r-in"><span>            .headline<span class="op">=</span><span class="st">"New columns from add_count:"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="history.html">history</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dtrackr history:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> number of flowchart steps: 2 (approx)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tags defined: &lt;none&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> items excluded so far: &lt;not capturing exclusions&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> last entry / entries:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └ "New columns from add_count:", "new_count_total"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add_tally</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dtrackr</span><span class="fu">::</span><span class="fu"><a href="add_tally.html">add_tally</a></span><span class="op">(</span>wt<span class="op">=</span><span class="va">Petal.Length</span>, name<span class="op">=</span><span class="st">"new_tally_total"</span>,</span></span>
<span class="r-in"><span>            .messages<span class="op">=</span><span class="st">"{.new_cols}"</span>,</span></span>
<span class="r-in"><span>            .headline<span class="op">=</span><span class="st">"New columns from add_tally:"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="history.html">history</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dtrackr history:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> number of flowchart steps: 3 (approx)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tags defined: &lt;none&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> items excluded so far: &lt;not capturing exclusions&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> last entry / entries:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├ [setosa]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├ [versicolor]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └ [virginica]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

