<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>dplyr modifying operations — p_add_count • dtrackr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="dplyr modifying operations — p_add_count"><meta property="og:description" content="See dplyr::mutate(), dplyr::add_count(), dplyr::add_tally(),
dplyr::transmute(), dplyr::select(), dplyr::relocate(),
dplyr::rename() dplyr::rename_with(), dplyr::arrange() for more details
on underlying functions. dtrackr provides equivalent functions for
mutating, selecting and renaming a data set which act in the same way as
dplyr. mutate / select / rename generally don't add anything in terms
of provenance of data so the default behaviour is to miss these out of the
dtrackr history. This can be overridden with the .messages, or
.headline values in which case they behave just like a comment()."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dtrackr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/dtrackr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/consort-example.html">dtrackr - Consort statement example</a>
    </li>
    <li>
      <a href="../articles/dtrackr-options.html">dtrackr - Configuration example</a>
    </li>
    <li>
      <a href="../articles/joining-pipelines.html">dtrackr - Joining data pipelines</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/terminological/dtrackr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>dplyr modifying operations</h1>
    <small class="dont-index">Source: <a href="https://github.com/terminological/dtrackr/blob/HEAD/R/dtrackr.R" class="external-link"><code>R/dtrackr.R</code></a></small>
    <div class="hidden name"><code>p_add_count.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>See <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_count()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_tally()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">dplyr::transmute()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">dplyr::relocate()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename()</a></code> <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename_with()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code> for more details
on underlying functions. <code>dtrackr</code> provides equivalent functions for
mutating, selecting and renaming a data set which act in the same way as
<code>dplyr</code>. <code>mutate</code> / <code>select</code> / <code>rename</code> generally don't add anything in terms
of provenance of data so the default behaviour is to miss these out of the
<code>dtrackr</code> history. This can be overridden with the <code>.messages</code>, or
<code>.headline</code> values in which case they behave just like a <code><a href="comment.html">comment()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">p_add_count</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, .messages <span class="op">=</span> <span class="st">""</span>, .headline <span class="op">=</span> <span class="st">""</span>, .tag <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data frame, data frame extension (e.g. a tibble), or a
lazy data frame (e.g. from dbplyr or dtplyr).</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::add_count</a></code></p><dl><dt><code>wt</code></dt>
<dd><p>&lt;<code><a href="https://rlang.r-lib.org/reference/args_data_masking.html" class="external-link">data-masking</a></code>&gt; Frequency weights.
Can be <code>NULL</code> or a variable:</p><ul><li><p>If <code>NULL</code> (the default), counts the number of rows in each group.</p></li>
<li><p>If a variable, computes <code>sum(wt)</code> for each group.</p></li>
</ul></dd>

    <dt><code>sort</code></dt>
<dd><p>If <code>TRUE</code>, will show the largest groups at the top.</p></dd>

    <dt><code>name</code></dt>
<dd><p>The name of the new column in the output.</p>
<p>If omitted, it will default to <code>n</code>. If there's already a column called <code>n</code>,
it will use <code>nn</code>. If there's a column called <code>n</code> and <code>nn</code>, it'll use
<code>nnn</code>, and so on, adding <code>n</code>s until it gets a new name.</p></dd>

    <dt><code>.drop</code></dt>
<dd><p>Handling of factor levels that don't appear in the data, passed
on to <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code>.</p>
<p>For <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code>: if <code>FALSE</code> will include counts for empty groups (i.e. for
levels of factors that don't exist in the data).</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> For <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">add_count()</a></code>: deprecated since it
can't actually affect the output.</p></dd>

  
</dl></dd>


<dt>.messages</dt>
<dd><p>a set of glue specs. The glue code can use any global
variable, grouping variable, {.new_cols} or {.dropped_cols} for changes to
columns, {.cols} for the output column names, or {.strata}. Defaults to nothing.</p></dd>


<dt>.headline</dt>
<dd><p>a headline glue spec. The glue code can use any global
variable, grouping variable, {.new_cols}, {.dropped_cols}, {.cols} or {.strata}.
Defaults to nothing.</p></dd>


<dt>.tag</dt>
<dd><p>if you want the summary data from this step in the future then
give it a name with .tag.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>the .data dataframe after being modified by the <code>dplyr</code> equivalent
function, but with the history graph updated with a new stage if the
<code>.messages</code> or <code>.headline</code> parameter is not empty.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>dplyr::add_count()</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://terminological.github.io/dtrackr/index.html" class="external-link">dtrackr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># mutate and other functions are unitary operations that generally change</span></span></span>
<span class="r-in"><span><span class="co"># the structure but not size of a dataframe. In dtrackr these are by ignored</span></span></span>
<span class="r-in"><span><span class="co"># by default but we can change that so that their behaviour is obvious.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add_count</span></span></span>
<span class="r-in"><span><span class="co"># adding in a count or tally column as a new column</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">add_count</a></span><span class="op">(</span><span class="va">Species</span>, name<span class="op">=</span><span class="st">"new_count_total"</span>,</span></span>
<span class="r-in"><span>            .messages<span class="op">=</span><span class="st">"{.new_cols}"</span>,</span></span>
<span class="r-in"><span>            <span class="co"># .messages="{.cols}",</span></span></span>
<span class="r-in"><span>            .headline<span class="op">=</span><span class="st">"New columns from add_count:"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="history.html">history</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dtrackr history:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> number of flowchart steps: 2 (approx)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tags defined: &lt;none&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> items excluded so far: &lt;not capturing exclusions&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> last entry / entries:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └ "New columns from add_count:", "new_count_total"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add_tally</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dtrackr</span><span class="fu">::</span><span class="fu"><a href="add_tally.html">add_tally</a></span><span class="op">(</span>wt<span class="op">=</span><span class="va">Petal.Length</span>, name<span class="op">=</span><span class="st">"new_tally_total"</span>,</span></span>
<span class="r-in"><span>            .messages<span class="op">=</span><span class="st">"{.new_cols}"</span>,</span></span>
<span class="r-in"><span>            .headline<span class="op">=</span><span class="st">"New columns from add_tally:"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="history.html">history</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dtrackr history:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> number of flowchart steps: 3 (approx)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tags defined: &lt;none&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> items excluded so far: &lt;not capturing exclusions&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> last entry / entries:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├ [Species:setosa]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ├ [Species:versicolor]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> └ [Species:virginica]: "New columns from add_tally:", "new_tally_total"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

