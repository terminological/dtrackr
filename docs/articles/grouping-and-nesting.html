<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>dtrackr - Grouping, Nesting and Long format data • dtrackr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dtrackr - Grouping, Nesting and Long format data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dtrackr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/dtrackr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/consort-example.html">dtrackr - Consort statement example</a></li>
    <li><a class="dropdown-item" href="../articles/dtrackr-options.html">dtrackr - Configuration example</a></li>
    <li><a class="dropdown-item" href="../articles/grouping-and-nesting.html">dtrackr - Grouping, Nesting and Long format data</a></li>
    <li><a class="dropdown-item" href="../articles/joining-pipelines.html">dtrackr - Joining data pipelines</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/terminological/dtrackr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>dtrackr - Grouping, Nesting and Long format data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/terminological/dtrackr/blob/HEAD/vignettes/grouping-and-nesting.Rmd" class="external-link"><code>vignettes/grouping-and-nesting.Rmd</code></a></small>
      <div class="d-none name"><code>grouping-and-nesting.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="long-format-data">Long format data<a class="anchor" aria-label="anchor" href="#long-format-data"></a>
</h2>
<p><code>dtrackr</code> assumes a tidy data paradigm where one row of
data is relevant to one logical entity, whether it be cars, irises,
diamonds, or anything else. This is not always the case, if for example
the data you are processing comes from a join of data sets. Here we
simulate a set of patients, test samples, and test results in a
hypothetical trial:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_cats</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%02d-%02d"</span>,<span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">80</span>,<span class="fl">5</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">84</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># A set of synthetic patients:</span></span>
<span><span class="va">patients</span> <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  patient_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,</span>
<span>  age_category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">age_cats</span>,<span class="fl">100</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  ethnicity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span>,<span class="st">"Female"</span><span class="op">)</span>, <span class="fl">100</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cases"</span>,<span class="st">"Controls"</span><span class="op">)</span>, <span class="fl">100</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># each patient is going to have a random selection of tests</span></span>
<span><span class="va">tests</span> <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  test_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>,</span>
<span>  patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,<span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  test_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FBC"</span>,<span class="st">"LFT"</span>,<span class="st">"Electrolytes"</span><span class="op">)</span>, <span class="fl">1000</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  test_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">1000</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and each test a random selection of results consisting of components and</span></span>
<span><span class="co"># values:</span></span>
<span><span class="va">tests</span> <span class="op">=</span> <span class="va">tests</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>  result <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">test_type</span>, <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">.x</span> <span class="op">==</span> <span class="st">"FBC"</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>      component <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HB"</span>,<span class="st">"platelets"</span>,<span class="st">"WCC"</span><span class="op">)</span>,</span>
<span>      value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">13.5</span>,<span class="fl">15</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">100</span>,<span class="fl">1000</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">.x</span> <span class="op">==</span> <span class="st">"LFT"</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>      component <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AST"</span>,<span class="st">"GGT"</span><span class="op">)</span>,</span>
<span>      value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">.x</span> <span class="op">==</span> <span class="st">"Electrolytes"</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>      component <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NA"</span>,<span class="st">"K"</span>,<span class="st">"Glucose"</span><span class="op">)</span>,</span>
<span>      value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">130</span>,<span class="fl">150</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3.3</span>,<span class="fl">5.2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">50</span>,<span class="fl">150</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">=</span> <span class="va">patients</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>  <span class="va">tests</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">unnest</span><span class="op">(</span><span class="va">result</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">unnest</span><span class="op">(</span><span class="va">result</span><span class="op">)</span>,</span>
<span>  by<span class="op">=</span><span class="st">"patient_id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 2,675</span></span>
<span><span class="co">## Columns: 10</span></span>
<span><span class="co">## $ patient_id   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ age_category <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>60-64<span style="color: #949494;">, </span>6…</span></span>
<span><span class="co">## $ ethnicity    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ gender       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Female"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Female…</span></span>
<span><span class="co">## $ group        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Cases"<span style="color: #949494;">, </span>"Cases"<span style="color: #949494;">, </span>"Cases"<span style="color: #949494;">, </span>"Cases"<span style="color: #949494;">, </span>"Cases"<span style="color: #949494;">, </span>"Cases"<span style="color: #949494;">, </span>"Ca…</span></span>
<span><span class="co">## $ test_id      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 105<span style="color: #949494;">, </span>105<span style="color: #949494;">, </span>105<span style="color: #949494;">, </span>218<span style="color: #949494;">, </span>218<span style="color: #949494;">, </span>218<span style="color: #949494;">, </span>248<span style="color: #949494;">, </span>248<span style="color: #949494;">, </span>248<span style="color: #949494;">, </span>264<span style="color: #949494;">, </span>264<span style="color: #949494;">, </span>26…</span></span>
<span><span class="co">## $ test_type    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Electrolytes"<span style="color: #949494;">, </span>"Electrolytes"<span style="color: #949494;">, </span>"Electrolytes"<span style="color: #949494;">, </span>"FBC"<span style="color: #949494;">, </span>"F…</span></span>
<span><span class="co">## $ test_date    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2025-01-14<span style="color: #949494;">, </span>2025-01-14<span style="color: #949494;">, </span>2025-01-14<span style="color: #949494;">, </span>2025-01-24<span style="color: #949494;">, </span>2025-01-…</span></span>
<span><span class="co">## $ component    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NA"<span style="color: #949494;">, </span>"K"<span style="color: #949494;">, </span>"Glucose"<span style="color: #949494;">, </span>"HB"<span style="color: #949494;">, </span>"platelets"<span style="color: #949494;">, </span>"WCC"<span style="color: #949494;">, </span>"HB"<span style="color: #949494;">, </span>"pl…</span></span>
<span><span class="co">## $ value        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 137.431443<span style="color: #949494;">, </span>4.284195<span style="color: #949494;">, </span>105.773981<span style="color: #949494;">, </span>14.560265<span style="color: #949494;">, </span>401.486805<span style="color: #949494;">, </span>…</span></span></code></pre>
<p>We might have an objective to prepare this data set for analysis but
have inclusion or exclusion criteria that apply at different levels. We
might have patients who need to be excluded as too young or old, or
specific test results that were taken at the wrong time, or patients who
have evidence of diabetes, or exclude specific test results that are out
of range. All of this we need to do while stratified by the control
group status.</p>
<p>To achieve this we use nesting to collapse the data frame into one
row per patient, one row per test or one row per test result, depending
on what we are trying to exclude. This allows <code>dtrackr</code> to
dynamically change what it regards as a single countable thing,
depending on the context of the pipeline.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">processed</span> <span class="op">=</span> <span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># the data is originally long format with one row per test result:</span></span>
<span>  <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="st">"{.count} test results"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>maybe_diabetic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">component</span> <span class="op">==</span> <span class="st">"Glucose"</span> <span class="op">&amp;</span> <span class="va">value</span><span class="op">&gt;</span><span class="fl">130</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">patient_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">nest</span><span class="op">(</span>test_panel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">component</span>,<span class="va">value</span><span class="op">)</span>, .messages<span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># Now the data is long format with one row per test:</span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} tests"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">nest</span><span class="op">(</span>tests <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"test_"</span><span class="op">)</span>, .messages<span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># and now long format with one row per patient:</span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} patients"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} patients"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># these exclusions are at the patient level</span></span>
<span>  <span class="fu"><a href="../reference/exclude_all.html">exclude_all</a></span><span class="op">(</span></span>
<span>    .headline <span class="op">=</span> <span class="st">"people"</span>,</span>
<span>    <span class="va">maybe_diabetic</span> <span class="op">~</span> <span class="st">"{.excluded} diabetics"</span>,</span>
<span>    <span class="va">age_category</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">age_cats</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">~</span> <span class="st">"{.excluded} under 20"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># these are now back at the test level</span></span>
<span>  <span class="fu">unnest</span><span class="op">(</span><span class="va">tests</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} tests"</span>,.headline <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/exclude_all.html">exclude_all</a></span><span class="op">(</span></span>
<span>    .headline <span class="op">=</span> <span class="st">"tests"</span>,</span>
<span>    <span class="va">test_date</span> <span class="op">&lt;</span> <span class="st">"2025-01-07"</span> <span class="op">~</span> <span class="st">"{.excluded} with invalid dates"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/count_subgroup.html">count_subgroup</a></span><span class="op">(</span><span class="va">test_type</span>, .headline <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># and finally at the granular test result level</span></span>
<span>  <span class="fu">unnest</span><span class="op">(</span><span class="va">test_panel</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/exclude_all.html">exclude_all</a></span><span class="op">(</span></span>
<span>    .headline <span class="op">=</span> <span class="st">"results"</span>,</span>
<span>    <span class="va">component</span> <span class="op">==</span> <span class="st">"HB"</span> <span class="op">&amp;</span> <span class="va">value</span> <span class="op">&lt;</span> <span class="fl">14</span> <span class="op">~</span> <span class="st">"{.excluded} invalid Hb results"</span>,</span>
<span>    <span class="va">component</span> <span class="op">==</span> <span class="st">"K"</span> <span class="op">&amp;</span> <span class="va">value</span> <span class="op">&lt;</span> <span class="fl">3.5</span> <span class="op">~</span> <span class="st">"{.excluded} haemolysed K+"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">test_type</span>, .add<span class="op">=</span><span class="cn">TRUE</span>, .messages<span class="op">=</span><span class="st">"By tests"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/count_subgroup.html">count_subgroup</a></span><span class="op">(</span><span class="va">component</span>, .headline <span class="op">=</span> <span class="st">"{test_type}"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span>.messages <span class="op">=</span> <span class="st">"{.count} eligible results"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">nest</span><span class="op">(</span>test_panel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">component</span>,<span class="va">value</span><span class="op">)</span>, .messages<span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} eligible tests"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">nest</span><span class="op">(</span>tests <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"test_"</span><span class="op">)</span>, .messages<span class="op">=</span><span class="st">""</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"{.count} eligible patients"</span><span class="op">)</span></span>
<span>  </span>
<span></span>
<span><span class="va">processed</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/flowchart.html">flowchart</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --><!-- Title: %0 Pages: 1 --><svg width="424.800pt" height="440.770pt" viewbox="0 0 424.800 440.770" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(0.798 0.798) rotate(0) translate(4 548.000)"><title>%0</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-547.6 528.0112,-547.6 528.0112,4 -4,4"></polygon><!-- 26&#45;&gt;27 --><g id="edge1" class="edge"><title>26:s-&gt;27</title>
<path fill="none" stroke="#000000" d="M260.0064,-41.4C260.0064,-41.4 260.0064,-28.4987 260.0064,-28.4987"></path><polygon fill="#000000" stroke="#000000" points="261.7565,-28.4987 260.0064,-23.4987 258.2565,-28.4987 261.7565,-28.4987"></polygon></g><!-- 25&#45;&gt;26 --><g id="edge2" class="edge"><title>25:s-&gt;26</title>
<path fill="none" stroke="#000000" d="M260.0064,-83C260.0064,-83 260.0064,-70.0987 260.0064,-70.0987"></path><polygon fill="#000000" stroke="#000000" points="261.7565,-70.0987 260.0064,-65.0987 258.2565,-70.0987 261.7565,-70.0987"></polygon></g><!-- 19&#45;&gt;25 --><g id="edge8" class="edge"><title>19:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M39.0064,-124.8C39.0064,-124.8 39.0064,-91 39.0064,-91 39.0064,-91 214.7286,-91 214.7286,-91"></path><polygon fill="#000000" stroke="#000000" points="214.7286,-92.7501 219.7286,-91 214.7285,-89.2501 214.7286,-92.7501"></polygon></g><!-- 20&#45;&gt;25 --><g id="edge7" class="edge"><title>20:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M131.0064,-124.8C131.0064,-124.8 131.0064,-98 131.0064,-98 131.0064,-98 214.5439,-98 214.5439,-98"></path><polygon fill="#000000" stroke="#000000" points="214.544,-99.7501 219.5439,-98 214.5439,-96.2501 214.544,-99.7501"></polygon></g><!-- 21&#45;&gt;25 --><g id="edge6" class="edge"><title>21:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M234.9496,-128.8C234.9496,-128.8 234.9496,-111.8216 234.9496,-111.8216"></path><polygon fill="#000000" stroke="#000000" points="236.6997,-111.8216 234.9496,-106.8216 233.1997,-111.8216 236.6997,-111.8216"></polygon></g><!-- 22&#45;&gt;25 --><g id="edge5" class="edge"><title>22:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M282.0616,-124.8C282.0616,-124.8 282.0616,-111.7777 282.0616,-111.7777"></path><polygon fill="#000000" stroke="#000000" points="283.8117,-111.7777 282.0616,-106.7777 280.3117,-111.7778 283.8117,-111.7777"></polygon></g><!-- 23&#45;&gt;25 --><g id="edge4" class="edge"><title>23:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M395.0064,-124.8C395.0064,-124.8 395.0064,-98 395.0064,-98 395.0064,-98 305.1453,-98 305.1453,-98"></path><polygon fill="#000000" stroke="#000000" points="305.1454,-96.2501 300.1453,-98 305.1453,-99.7501 305.1454,-96.2501"></polygon></g><!-- 24&#45;&gt;25 --><g id="edge3" class="edge"><title>24:s-&gt;25</title>
<path fill="none" stroke="#000000" d="M481.0064,-128.8C481.0064,-128.8 481.0064,-91 481.0064,-91 481.0064,-91 305.2842,-91 305.2842,-91"></path><polygon fill="#000000" stroke="#000000" points="305.2843,-89.2501 300.2842,-91 305.2842,-92.7501 305.2843,-89.2501"></polygon></g><!-- 17&#45;&gt;19 --><g id="edge14" class="edge"><title>17:s-&gt;19</title>
<path fill="none" stroke="#000000" d="M163.0064,-200C163.0064,-200 39.0064,-200 39.0064,-200 39.0064,-200 39.0064,-175.8476 39.0064,-175.8476"></path><polygon fill="#000000" stroke="#000000" points="40.7565,-175.8476 39.0064,-170.8476 37.2565,-175.8477 40.7565,-175.8476"></polygon></g><!-- 17&#45;&gt;20 --><g id="edge13" class="edge"><title>17:s-&gt;20</title>
<path fill="none" stroke="#000000" d="M156.008,-188.6C156.008,-188.6 156.008,-176.0603 156.008,-176.0603"></path><polygon fill="#000000" stroke="#000000" points="157.7581,-176.0603 156.008,-171.0603 154.2581,-176.0604 157.7581,-176.0603"></polygon></g><!-- 17&#45;&gt;21 --><g id="edge12" class="edge"><title>17:s-&gt;21</title>
<path fill="none" stroke="#000000" d="M163.0064,-196C163.0064,-196 196.1218,-196 196.1218,-196 196.1218,-196 196.1218,-171.8499 196.1218,-171.8499"></path><polygon fill="#000000" stroke="#000000" points="197.8719,-171.8499 196.1218,-166.8499 194.3719,-171.85 197.8719,-171.8499"></polygon></g><!-- 18&#45;&gt;22 --><g id="edge11" class="edge"><title>18:s-&gt;22</title>
<path fill="none" stroke="#000000" d="M379.0064,-204C379.0064,-204 338.0072,-204 338.0072,-204 338.0072,-204 338.0072,-175.9832 338.0072,-175.9832"></path><polygon fill="#000000" stroke="#000000" points="339.7573,-175.9831 338.0072,-170.9832 336.2573,-175.9832 339.7573,-175.9831"></polygon></g><!-- 18&#45;&gt;23 --><g id="edge10" class="edge"><title>18:s-&gt;23</title>
<path fill="none" stroke="#000000" d="M379.0064,-188.6C379.0064,-188.6 379.0064,-176.0603 379.0064,-176.0603"></path><polygon fill="#000000" stroke="#000000" points="380.7565,-176.0603 379.0064,-171.0603 377.2565,-176.0604 380.7565,-176.0603"></polygon></g><!-- 18&#45;&gt;24 --><g id="edge9" class="edge"><title>18:s-&gt;24</title>
<path fill="none" stroke="#000000" d="M379.0064,-200C379.0064,-200 481.0064,-200 481.0064,-200 481.0064,-200 481.0064,-171.9409 481.0064,-171.9409"></path><polygon fill="#000000" stroke="#000000" points="482.7565,-171.9409 481.0064,-166.9409 479.2565,-171.941 482.7565,-171.9409"></polygon></g><!-- 13&#45;&gt;17 --><g id="edge16" class="edge"><title>13:s-&gt;17</title>
<path fill="none" stroke="#000000" d="M163.0064,-230.8C163.0064,-230.8 163.0064,-217.5358 163.0064,-217.5358"></path><polygon fill="#000000" stroke="#000000" points="164.7565,-217.5358 163.0064,-212.5358 161.2565,-217.5359 164.7565,-217.5358"></polygon></g><!-- 13&#45;&gt;15 --><g id="edge18" class="edge"><title>13:e-&gt;15</title>
<path fill="none" stroke="#000000" d="M208.0064,-251C208.0064,-251 217.1703,-251 217.1703,-251"></path><polygon fill="#000000" stroke="#000000" points="217.1703,-252.7501 222.1703,-251 217.1702,-249.2501 217.1703,-252.7501"></polygon></g><!-- 14&#45;&gt;18 --><g id="edge15" class="edge"><title>14:s-&gt;18</title>
<path fill="none" stroke="#000000" d="M379.0064,-230.8C379.0064,-230.8 379.0064,-217.5358 379.0064,-217.5358"></path><polygon fill="#000000" stroke="#000000" points="380.7565,-217.5358 379.0064,-212.5358 377.2565,-217.5359 380.7565,-217.5358"></polygon></g><!-- 14&#45;&gt;16 --><g id="edge17" class="edge"><title>14:e-&gt;16</title>
<path fill="none" stroke="#000000" d="M424.0064,-251C424.0064,-251 432.8045,-251 432.8045,-251"></path><polygon fill="#000000" stroke="#000000" points="432.8045,-252.7501 437.8045,-251 432.8045,-249.2501 432.8045,-252.7501"></polygon></g><!-- 9&#45;&gt;13 --><g id="edge20" class="edge"><title>9:s-&gt;13</title>
<path fill="none" stroke="#000000" d="M163.0064,-294.2C163.0064,-294.2 163.0064,-278.4968 163.0064,-278.4968"></path><polygon fill="#000000" stroke="#000000" points="164.7565,-278.4968 163.0064,-273.4968 161.2565,-278.4969 164.7565,-278.4968"></polygon></g><!-- 9&#45;&gt;11 --><g id="edge22" class="edge"><title>9:e-&gt;11</title>
<path fill="none" stroke="#000000" d="M186.0064,-306C186.0064,-306 194.8045,-306 194.8045,-306"></path><polygon fill="#000000" stroke="#000000" points="194.8045,-307.7501 199.8045,-306 194.8045,-304.2501 194.8045,-307.7501"></polygon></g><!-- 10&#45;&gt;14 --><g id="edge19" class="edge"><title>10:s-&gt;14</title>
<path fill="none" stroke="#000000" d="M379.0064,-294.2C379.0064,-294.2 379.0064,-278.4968 379.0064,-278.4968"></path><polygon fill="#000000" stroke="#000000" points="380.7565,-278.4968 379.0064,-273.4968 377.2565,-278.4969 380.7565,-278.4968"></polygon></g><!-- 10&#45;&gt;12 --><g id="edge21" class="edge"><title>10:e-&gt;12</title>
<path fill="none" stroke="#000000" d="M402.0064,-306C402.0064,-306 410.8045,-306 410.8045,-306"></path><polygon fill="#000000" stroke="#000000" points="410.8045,-307.7501 415.8045,-306 410.8045,-304.2501 410.8045,-307.7501"></polygon></g><!-- 5&#45;&gt;9 --><g id="edge24" class="edge"><title>5:s-&gt;9</title>
<path fill="none" stroke="#000000" d="M163.0064,-343.2C163.0064,-343.2 163.0064,-322.907 163.0064,-322.907"></path><polygon fill="#000000" stroke="#000000" points="164.7565,-322.907 163.0064,-317.907 161.2565,-322.9071 164.7565,-322.907"></polygon></g><!-- 5&#45;&gt;7 --><g id="edge26" class="edge"><title>5:e-&gt;7</title>
<path fill="none" stroke="#000000" d="M190.0064,-358C190.0064,-358 198.7588,-358 198.7588,-358"></path><polygon fill="#000000" stroke="#000000" points="198.7588,-359.7501 203.7588,-358 198.7587,-356.2501 198.7588,-359.7501"></polygon></g><!-- 6&#45;&gt;10 --><g id="edge23" class="edge"><title>6:s-&gt;10</title>
<path fill="none" stroke="#000000" d="M379.0064,-343.2C379.0064,-343.2 379.0064,-322.907 379.0064,-322.907"></path><polygon fill="#000000" stroke="#000000" points="380.7565,-322.907 379.0064,-317.907 377.2565,-322.9071 380.7565,-322.907"></polygon></g><!-- 6&#45;&gt;8 --><g id="edge25" class="edge"><title>6:e-&gt;8</title>
<path fill="none" stroke="#000000" d="M406.0064,-358C406.0064,-358 414.7588,-358 414.7588,-358"></path><polygon fill="#000000" stroke="#000000" points="414.7588,-359.7501 419.7588,-358 414.7587,-356.2501 414.7588,-359.7501"></polygon></g><!-- 4&#45;&gt;5 --><g id="edge28" class="edge"><title>4:s-&gt;5</title>
<path fill="none" stroke="#000000" d="M263.0064,-407C263.0064,-407 163.0064,-407 163.0064,-407 163.0064,-407 163.0064,-378.3731 163.0064,-378.3731"></path><polygon fill="#000000" stroke="#000000" points="164.7565,-378.3731 163.0064,-373.3731 161.2565,-378.3732 164.7565,-378.3731"></polygon></g><!-- 4&#45;&gt;6 --><g id="edge27" class="edge"><title>4:s-&gt;6</title>
<path fill="none" stroke="#000000" d="M292.2358,-395C292.2358,-395 292.2358,-358 292.2358,-358 292.2358,-358 347.0273,-358 347.0273,-358"></path><polygon fill="#000000" stroke="#000000" points="347.0273,-359.7501 352.0273,-358 347.0272,-356.2501 347.0273,-359.7501"></polygon></g><!-- 3&#45;&gt;4 --><g id="edge29" class="edge"><title>3:s-&gt;4</title>
<path fill="none" stroke="#000000" d="M263.0064,-436.6C263.0064,-436.6 263.0064,-423.6987 263.0064,-423.6987"></path><polygon fill="#000000" stroke="#000000" points="264.7565,-423.6987 263.0064,-418.6987 261.2565,-423.6987 264.7565,-423.6987"></polygon></g><!-- 2&#45;&gt;3 --><g id="edge30" class="edge"><title>2:s-&gt;3</title>
<path fill="none" stroke="#000000" d="M263.0064,-478.2C263.0064,-478.2 263.0064,-465.2987 263.0064,-465.2987"></path><polygon fill="#000000" stroke="#000000" points="264.7565,-465.2987 263.0064,-460.2987 261.2565,-465.2987 264.7565,-465.2987"></polygon></g><!-- 1&#45;&gt;2 --><g id="edge31" class="edge"><title>1:s-&gt;2</title>
<path fill="none" stroke="#000000" d="M263.0064,-519.8C263.0064,-519.8 263.0064,-506.8987 263.0064,-506.8987"></path><polygon fill="#000000" stroke="#000000" points="264.7565,-506.8987 263.0064,-501.8987 261.2565,-506.8987 264.7565,-506.8987"></polygon></g><!-- 27 --><g id="node1" class="node"><title>27</title>
<polygon fill="#ffffff" stroke="#000000" points="300.2476,-23.4033 219.7652,-23.4033 219.7652,-.1967 300.2476,-.1967 300.2476,-23.4033"></polygon><text text-anchor="start" x="226.886" y="-9.4" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">33 eligible patients</text></g><!-- 26 --><g id="node2" class="node"><title>26</title>
<polygon fill="#ffffff" stroke="#000000" points="296.5788,-65.0033 223.434,-65.0033 223.434,-41.7967 296.5788,-41.7967 296.5788,-65.0033"></polygon><text text-anchor="start" x="230.2208" y="-51" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">271 eligible tests</text></g><!-- 25 --><g id="node3" class="node"><title>25</title>
<polygon fill="#ffffff" stroke="#000000" points="300.2403,-106.6033 219.7725,-106.6033 219.7725,-83.3967 300.2403,-83.3967 300.2403,-106.6033"></polygon><text text-anchor="start" x="226.8896" y="-92.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">692 eligible results</text></g><!-- 19 --><g id="node4" class="node"><title>19</title>
<polygon fill="#ffffff" stroke="#000000" points="78.0192,-170.8 -.0064,-170.8 -.0064,-124.8 78.0192,-124.8 78.0192,-170.8"></polygon><text text-anchor="start" x="7" y="-157.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Electrolytes</text><text text-anchor="start" x="7" y="-149.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">Glucose: 36 items</text><text text-anchor="start" x="7" y="-141.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">K: 35 items</text><text text-anchor="start" x="7" y="-133.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">NA: 36 items</text></g><!-- 20 --><g id="node5" class="node"><title>20</title>
<polygon fill="#ffffff" stroke="#000000" points="170.4661,-170.8 91.5467,-170.8 91.5467,-124.8 170.4661,-124.8 170.4661,-170.8"></polygon><text text-anchor="start" x="98.7772" y="-157.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">FBC</text><text text-anchor="start" x="98.7772" y="-149.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">HB: 22 items</text><text text-anchor="start" x="98.7772" y="-141.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">platelets: 28 items</text><text text-anchor="start" x="98.7772" y="-133.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">WCC: 28 items</text></g><!-- 21 --><g id="node6" class="node"><title>21</title>
<polygon fill="#ffffff" stroke="#000000" points="250.0128,-166.8 184,-166.8 184,-128.8 250.0128,-128.8 250.0128,-166.8"></polygon><text text-anchor="start" x="191.0032" y="-153.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">LFT</text><text text-anchor="start" x="191.0032" y="-145.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">AST: 33 items</text><text text-anchor="start" x="191.0032" y="-137.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">GGT: 33 items</text></g><!-- 22 --><g id="node7" class="node"><title>22</title>
<polygon fill="#ffffff" stroke="#000000" points="342.0192,-170.8 263.9936,-170.8 263.9936,-124.8 342.0192,-124.8 342.0192,-170.8"></polygon><text text-anchor="start" x="271" y="-157.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Electrolytes</text><text text-anchor="start" x="271" y="-149.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">Glucose: 43 items</text><text text-anchor="start" x="271" y="-141.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">K: 39 items</text><text text-anchor="start" x="271" y="-133.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">NA: 43 items</text></g><!-- 23 --><g id="node8" class="node"><title>23</title>
<polygon fill="#ffffff" stroke="#000000" points="434.4661,-170.8 355.5467,-170.8 355.5467,-124.8 434.4661,-124.8 434.4661,-170.8"></polygon><text text-anchor="start" x="362.7772" y="-157.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">FBC</text><text text-anchor="start" x="362.7772" y="-149.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">HB: 54 items</text><text text-anchor="start" x="362.7772" y="-141.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">platelets: 79 items</text><text text-anchor="start" x="362.7772" y="-133.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">WCC: 79 items</text></g><!-- 24 --><g id="node9" class="node"><title>24</title>
<polygon fill="#ffffff" stroke="#000000" points="514.0128,-166.8 448,-166.8 448,-128.8 514.0128,-128.8 514.0128,-166.8"></polygon><text text-anchor="start" x="455.0032" y="-153.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">LFT</text><text text-anchor="start" x="455.0032" y="-145.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">AST: 52 items</text><text text-anchor="start" x="455.0032" y="-137.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">GGT: 52 items</text></g><!-- 17 --><g id="node10" class="node"><title>17</title>
<polygon fill="#ffffff" stroke="#000000" points="184.4608,-212.2033 141.552,-212.2033 141.552,-188.9967 184.4608,-188.9967 184.4608,-212.2033"></polygon><text text-anchor="start" x="148.7804" y="-198.2" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">By tests</text></g><!-- 18 --><g id="node11" class="node"><title>18</title>
<polygon fill="#ffffff" stroke="#000000" points="400.4608,-212.2033 357.552,-212.2033 357.552,-188.9967 400.4608,-188.9967 400.4608,-212.2033"></polygon><text text-anchor="start" x="364.7804" y="-198.2" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">By tests</text></g><!-- 13 --><g id="node12" class="node"><title>13</title>
<polygon fill="#ffffff" stroke="#000000" points="208.016,-273.1005 117.9968,-273.1005 117.9968,-230.4995 208.016,-230.4995 208.016,-273.1005"></polygon><text text-anchor="start" x="125.0016" y="-259" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">Electrolytes: 36 items</text><text text-anchor="start" x="125.0016" y="-249.4" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">FBC: 28 items</text><text text-anchor="start" x="125.0016" y="-239.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">LFT: 33 items</text></g><!-- 14 --><g id="node13" class="node"><title>14</title>
<polygon fill="#ffffff" stroke="#000000" points="424.016,-273.1005 333.9968,-273.1005 333.9968,-230.4995 424.016,-230.4995 424.016,-273.1005"></polygon><text text-anchor="start" x="341.0016" y="-259" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">Electrolytes: 43 items</text><text text-anchor="start" x="341.0016" y="-249.4" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">FBC: 79 items</text><text text-anchor="start" x="341.0016" y="-239.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">LFT: 52 items</text></g><!-- 15 --><g id="node14" class="node"><title>15</title>
<polygon fill="#cccccc" stroke="#000000" points="303.57,-270.8 222.4428,-270.8 222.4428,-232.8 303.57,-232.8 303.57,-270.8"></polygon><text text-anchor="start" x="229.2252" y="-257.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">results</text><text text-anchor="start" x="229.2252" y="-249.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">6 invalid Hb results</text><text text-anchor="start" x="229.2252" y="-241.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">1 haemolysed K+</text></g><!-- 16 --><g id="node15" class="node"><title>16</title>
<polygon fill="#cccccc" stroke="#000000" points="524.016,-270.8 437.9968,-270.8 437.9968,-232.8 524.016,-232.8 524.016,-270.8"></polygon><text text-anchor="start" x="445.0016" y="-257.6" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">results</text><text text-anchor="start" x="445.0016" y="-249.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">25 invalid Hb results</text><text text-anchor="start" x="445.0016" y="-241.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">4 haemolysed K+</text></g><!-- 9 --><g id="node16" class="node"><title>9</title>
<polygon fill="#ffffff" stroke="#000000" points="186.4671,-317.8033 139.5457,-317.8033 139.5457,-294.5967 186.4671,-294.5967 186.4671,-317.8033"></polygon><text text-anchor="start" x="146.7772" y="-303.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">112 tests</text></g><!-- 10 --><g id="node17" class="node"><title>10</title>
<polygon fill="#ffffff" stroke="#000000" points="402.4671,-317.8033 355.5457,-317.8033 355.5457,-294.5967 402.4671,-294.5967 402.4671,-317.8033"></polygon><text text-anchor="start" x="362.7772" y="-303.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">195 tests</text></g><!-- 11 --><g id="node18" class="node"><title>11</title>
<polygon fill="#cccccc" stroke="#000000" points="286.0232,-321.2 199.9896,-321.2 199.9896,-291.2 286.0232,-291.2 286.0232,-321.2"></polygon><text text-anchor="start" x="206.998" y="-308" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">tests</text><text text-anchor="start" x="206.998" y="-300" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">15 with invalid dates</text></g><!-- 12 --><g id="node19" class="node"><title>12</title>
<polygon fill="#cccccc" stroke="#000000" points="502.0232,-321.2 415.9896,-321.2 415.9896,-291.2 502.0232,-291.2 502.0232,-321.2"></polygon><text text-anchor="start" x="422.998" y="-308" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">tests</text><text text-anchor="start" x="422.998" y="-300" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">21 with invalid dates</text></g><!-- 5 --><g id="node20" class="node"><title>5</title>
<polygon fill="#ffffff" stroke="#000000" points="189.6346,-373.2 136.3782,-373.2 136.3782,-343.2 189.6346,-343.2 189.6346,-373.2"></polygon><text text-anchor="start" x="143.4424" y="-360" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Cases</text><text text-anchor="start" x="143.4424" y="-352" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">44 patients</text></g><!-- 6 --><g id="node21" class="node"><title>6</title>
<polygon fill="#ffffff" stroke="#000000" points="405.6346,-373.2 352.3782,-373.2 352.3782,-343.2 405.6346,-343.2 405.6346,-373.2"></polygon><text text-anchor="start" x="359.4424" y="-360" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Controls</text><text text-anchor="start" x="359.4424" y="-352" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">56 patients</text></g><!-- 7 --><g id="node22" class="node"><title>7</title>
<polygon fill="#cccccc" stroke="#000000" points="260.1945,-377.2 203.8183,-377.2 203.8183,-339.2 260.1945,-339.2 260.1945,-377.2"></polygon><text text-anchor="start" x="210.6628" y="-364" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">people</text><text text-anchor="start" x="210.6628" y="-356" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">24 diabetics</text><text text-anchor="start" x="210.6628" y="-348" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">16 under 20</text></g><!-- 8 --><g id="node23" class="node"><title>8</title>
<polygon fill="#cccccc" stroke="#000000" points="476.1945,-377.2 419.8183,-377.2 419.8183,-339.2 476.1945,-339.2 476.1945,-377.2"></polygon><text text-anchor="start" x="426.6628" y="-364" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">people</text><text text-anchor="start" x="426.6628" y="-356" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">26 diabetics</text><text text-anchor="start" x="426.6628" y="-348" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">12 under 20</text></g><!-- 4 --><g id="node24" class="node"><title>4</title>
<polygon fill="#ffffff" stroke="#000000" points="298.4073,-418.6033 227.6055,-418.6033 227.6055,-395.3967 298.4073,-395.3967 298.4073,-418.6033"></polygon><text text-anchor="start" x="234.556" y="-404.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">stratify by group</text></g><!-- 3 --><g id="node25" class="node"><title>3</title>
<polygon fill="#ffffff" stroke="#000000" points="291.5832,-460.2033 234.4296,-460.2033 234.4296,-436.9967 291.5832,-436.9967 291.5832,-460.2033"></polygon><text text-anchor="start" x="241.2188" y="-446.2" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">100 patients</text></g><!-- 2 --><g id="node26" class="node"><title>2</title>
<polygon fill="#ffffff" stroke="#000000" points="288.4121,-501.8033 237.6007,-501.8033 237.6007,-478.5967 288.4121,-478.5967 288.4121,-501.8033"></polygon><text text-anchor="start" x="244.5536" y="-487.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">1000 tests</text></g><!-- 1 --><g id="node27" class="node"><title>1</title>
<polygon fill="#ffffff" stroke="#000000" points="299.1919,-543.4033 226.8209,-543.4033 226.8209,-520.1967 299.1919,-520.1967 299.1919,-543.4033"></polygon><text text-anchor="start" x="233.664" y="-529.4" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">2675 test results</text></g></g></svg>
</div>
<div class="section level2">
<h2 id="maximum-groupings">Maximum groupings<a class="anchor" aria-label="anchor" href="#maximum-groupings"></a>
</h2>
<p>Going back to the original example data, in a slightly contrived
example let’s assume we want to exclude age categories that don’t have a
close gender match between cases and controls. We have to create a lot
of small groups to count.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">age_category</span>, <span class="va">gender</span>, <span class="va">group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">patient_id</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>values_from <span class="op">=</span> <span class="va">n</span>, names_from <span class="op">=</span> <span class="va">group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">Cases</span><span class="op">-</span><span class="va">Controls</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## `summarise()` has grouped output by 'age_category', 'gender'. You can override</span></span>
<span><span class="co">## using the `.groups` argument.</span></span></code></pre>
<pre><code><span><span class="co">## Rows: 14</span></span>
<span><span class="co">## Columns: 4</span></span>
<span><span class="co">## Groups: age_category, gender [14]</span></span>
<span><span class="co">## $ age_category <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 00-04<span style="color: #949494;">, </span>05-09<span style="color: #949494;">, </span>05-09<span style="color: #949494;">, </span>15-19<span style="color: #949494;">, </span>20-24<span style="color: #949494;">, </span>35-39<span style="color: #949494;">, </span>40-44<span style="color: #949494;">, </span>50-54<span style="color: #949494;">, </span>5…</span></span>
<span><span class="co">## $ gender       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Male"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Male"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Male"<span style="color: #949494;">, </span>"Female"<span style="color: #949494;">, </span>"Fe…</span></span>
<span><span class="co">## $ Cases        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1</span></span>
<span><span class="co">## $ Controls     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1</span></span></code></pre>
<p>If we were to try and monitor this data frame through the pipeline
there would be a problem with the flowchart because too many groups are
generated. This causes performance and legibility issues for the
resulting graph and is a result of an interim stage of the data pipeline
where grouping is used to do fine scale summarisation operation. The
most number of groups that <code>dtrackr</code> will attempt to keep
track of is configurable but defaults to 16, and if the number of groups
exceeds that it will pause tracking, until the number of groups is
restored to a lower number, at which point it will start following
again. A “&lt; hidden steps &gt;” message is inserted into the graph
when this happens but this can be changed, or disabled altogether with
<code>options(dtrackr.hidden_steps = "")</code>. <code>dtrackr</code>
does not by default warn the user of this unless the
<code>options(dtrackr.verbose=TRUE)</code> is set.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">old</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>dtrackr.verbose<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/track.html">track</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"{.count} items"</span>,<span class="st">"before pause"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># the tracking is paused on this next step as the number of groups becomes &gt;16</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">age_category</span>, <span class="va">group</span>, .add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="st">"This message is not tracked"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">patient_id</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>values_from <span class="op">=</span> <span class="va">n</span>, names_from <span class="op">=</span> <span class="va">group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">Cases</span><span class="op">-</span><span class="va">Controls</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  </span>
<span>  <span class="co"># the tracking is automatically resumed at this point as the grouping has</span></span>
<span>  <span class="co"># returned to manageable levels.</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/comment.html">comment</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"{.count} summarised rows"</span>,<span class="st">"after resume"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/flowchart.html">flowchart</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">•</span> This group_by() has created more than the maximum number of supported groupings (16) which will likely impact performance. We have paused tracking the dataframe.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">•</span> To change this limit set the option 'dtrackr.max_supported_groupings'.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">•</span> Automatically resuming tracking.</span></span></code></pre>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --><!-- Title: %0 Pages: 1 --><svg width="188.000pt" height="268.000pt" viewbox="0 0 188.000 268.000" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1.000 1.000) rotate(0) translate(4 264.000)"><title>%0</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-264.4 184.3328,-264.4 184.3328,4 -4,4"></polygon><!-- 6&#45;&gt;7 --><g id="edge2" class="edge"><title>6:s-&gt;7</title>
<path fill="none" stroke="#000000" d="M67.6626,-55.8C67.6626,-55.8 67.6626,-43.2622 67.6626,-43.2622"></path><polygon fill="#000000" stroke="#000000" points="69.4127,-43.2622 67.6626,-38.2622 65.9127,-43.2623 69.4127,-43.2622"></polygon></g><!-- 6&#45;&gt;8 --><g id="edge1" class="edge"><title>6:s-&gt;8</title>
<path fill="none" stroke="#000000" d="M112.1702,-55.8C112.1702,-55.8 112.1702,-43.2622 112.1702,-43.2622"></path><polygon fill="#000000" stroke="#000000" points="113.9203,-43.2622 112.1702,-38.2622 110.4203,-43.2623 113.9203,-43.2622"></polygon></g><!-- 5&#45;&gt;6 --><g id="edge3" class="edge"><title>5:s-&gt;6</title>
<path fill="none" stroke="#000000" d="M89.6664,-97.4C89.6664,-97.4 89.6664,-84.4987 89.6664,-84.4987"></path><polygon fill="#000000" stroke="#000000" points="91.4165,-84.4987 89.6664,-79.4987 87.9165,-84.4987 91.4165,-84.4987"></polygon></g><!-- 3&#45;&gt;5 --><g id="edge5" class="edge"><title>3:s-&gt;5</title>
<path fill="none" stroke="#000000" d="M68.053,-139.2C68.053,-139.2 68.053,-126.1777 68.053,-126.1777"></path><polygon fill="#000000" stroke="#000000" points="69.8031,-126.1777 68.053,-121.1777 66.3031,-126.1778 69.8031,-126.1777"></polygon></g><!-- 4&#45;&gt;5 --><g id="edge4" class="edge"><title>4:s-&gt;5</title>
<path fill="none" stroke="#000000" d="M111.7798,-139.2C111.7798,-139.2 111.7798,-126.1777 111.7798,-126.1777"></path><polygon fill="#000000" stroke="#000000" points="113.5299,-126.1777 111.7798,-121.1777 110.0299,-126.1778 113.5299,-126.1777"></polygon></g><!-- 2&#45;&gt;3 --><g id="edge7" class="edge"><title>2:s-&gt;3</title>
<path fill="none" stroke="#000000" d="M67.5012,-195C67.5012,-195 67.5012,-182.4622 67.5012,-182.4622"></path><polygon fill="#000000" stroke="#000000" points="69.2513,-182.4622 67.5012,-177.4622 65.7513,-182.4623 69.2513,-182.4622"></polygon></g><!-- 2&#45;&gt;4 --><g id="edge6" class="edge"><title>2:s-&gt;4</title>
<path fill="none" stroke="#000000" d="M112.3316,-195C112.3316,-195 112.3316,-182.4622 112.3316,-182.4622"></path><polygon fill="#000000" stroke="#000000" points="114.0817,-182.4622 112.3316,-177.4622 110.5817,-182.4623 114.0817,-182.4622"></polygon></g><!-- 1&#45;&gt;2 --><g id="edge8" class="edge"><title>1:s-&gt;2</title>
<path fill="none" stroke="#000000" d="M89.6664,-236.6C89.6664,-236.6 89.6664,-223.6987 89.6664,-223.6987"></path><polygon fill="#000000" stroke="#000000" points="91.4165,-223.6987 89.6664,-218.6987 87.9165,-223.6987 91.4165,-223.6987"></polygon></g><!-- 7 --><g id="node1" class="node"><title>7</title>
<polygon fill="#ffffff" stroke="#000000" points="83.4999,-38 -.1671,-38 -.1671,0 83.4999,0 83.4999,-38"></polygon><text text-anchor="start" x="7" y="-24.8" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Female</text><text text-anchor="start" x="7" y="-16.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">6 summarised rows</text><text text-anchor="start" x="7" y="-8.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">after resume</text></g><!-- 8 --><g id="node2" class="node"><title>8</title>
<polygon fill="#ffffff" stroke="#000000" points="180.4999,-38 96.8329,-38 96.8329,0 180.4999,0 180.4999,-38"></polygon><text text-anchor="start" x="104" y="-24.8" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Male</text><text text-anchor="start" x="104" y="-16.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">8 summarised rows</text><text text-anchor="start" x="104" y="-8.8" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">after resume</text></g><!-- 6 --><g id="node3" class="node"><title>6</title>
<polygon fill="#ffffff" stroke="#000000" points="127.5152,-79.4033 51.8176,-79.4033 51.8176,-56.1967 127.5152,-56.1967 127.5152,-79.4033"></polygon><text text-anchor="start" x="58.9924" y="-65.4" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">stratify by gender</text></g><!-- 5 --><g id="node4" class="node"><title>5</title>
<polygon fill="#e6e6e6" stroke="#000000" points="126.3073,-121.0033 53.0255,-121.0033 53.0255,-97.7967 126.3073,-97.7967 126.3073,-121.0033"></polygon><text text-anchor="start" x="60.096" y="-107" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">&lt; hidden steps &gt;</text></g><!-- 3 --><g id="node5" class="node"><title>3</title>
<polygon fill="#ffffff" stroke="#000000" points="82.8544,-177.2 22.4784,-177.2 22.4784,-139.2 82.8544,-139.2 82.8544,-177.2"></polygon><text text-anchor="start" x="29.3228" y="-164" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Female</text><text text-anchor="start" x="29.3228" y="-156" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">1514 items</text><text text-anchor="start" x="29.3228" y="-148" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">before pause</text></g><!-- 4 --><g id="node6" class="node"><title>4</title>
<polygon fill="#ffffff" stroke="#000000" points="157.8544,-177.2 97.4784,-177.2 97.4784,-139.2 157.8544,-139.2 157.8544,-177.2"></polygon><text text-anchor="start" x="104.3228" y="-164" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="8.00" fill="#000000">Male</text><text text-anchor="start" x="104.3228" y="-156" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">1161 items</text><text text-anchor="start" x="104.3228" y="-148" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">before pause</text></g><!-- 2 --><g id="node7" class="node"><title>2</title>
<polygon fill="#ffffff" stroke="#000000" points="127.5152,-218.6033 51.8176,-218.6033 51.8176,-195.3967 127.5152,-195.3967 127.5152,-218.6033"></polygon><text text-anchor="start" x="58.9924" y="-204.6" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">stratify by gender</text></g><!-- 1 --><g id="node8" class="node"><title>1</title>
<polygon fill="#ffffff" stroke="#000000" points="116.2873,-260.2033 63.0455,-260.2033 63.0455,-236.9967 116.2873,-236.9967 116.2873,-260.2033"></polygon><text text-anchor="start" x="70.106" y="-246.2" font-family="Helvetica,sans-Serif" font-size="8.00" fill="#000000">2675 items</text></g></g></svg><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">old</span><span class="op">)</span></span></code></pre></div>
<p>By default this behaviour is triggered if we get to 16 subgroups.
This can be changed by setting the option:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>dtrackr.max_supported_groupings <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></code></pre></div>
<p>Pausing and unpausing the tracking can also be done manually by
calling <code><a href="../reference/pause.html">dtrackr::pause()</a></code> and
<code><a href="../reference/resume.html">dtrackr::resume()</a></code>. This is a fairly experimental feature,
and I don’t expect it to be heavily used.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Challen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
